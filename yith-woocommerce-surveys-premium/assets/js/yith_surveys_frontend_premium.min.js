jQuery(document).ready(function(s){var e=(s(".survey_after_before_add_to_cart .yith_surveys_container"),s(".survey_after_product_summary")),r=s(".yith_surveys_other_container");e.find(".surveys_list *").size()>0&&e.removeClass("survey_hide");var t=r.parent();t.hasClass("widget_yith-wc-surveys")&&0==r.find("*").size()&&t.remove(),s(".yith_send_answer").on("click",function(e){function r(e,y){var v={yith_surveys_ids:e,yith_answers_ids:y,action:yith_survey_frontend_params.actions.save_surveys_voting};s.ajax({type:"POST",url:yith_survey_frontend_params.ajax_url,data:v,dataType:"json",success:function(y){if((u==i.length||"undefined"==typeof y.result||"already_response"==y.result)&&a.unblock(),"true"==y.result){var v=s("#yith_surveys_answers-"+e),o=v.parents(".yith_single_surveys_container");o.html('<div class="yith_survey_thanks">'+yith_survey_frontend_params.messages.survey_thanks_voting+"</div>"),u++,r(i[u],_[u])}u==n.size()&&t.hide()}})}e.preventDefault();var t=s(this),a=t.parents(".surveys_list"),n=a.find(".yith_surveys_answers"),i=new Array,_=new Array,y={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0};n.each(function(){var e=s(this).attr("id"),r=s(this).val();""!=r&&(e=e.split("-"),e=e[1],i.push(e),_.push(r))});var u=0;i.length>0&&(a.block(y),r(i[u],_[u]))}),s(".yith_send_single_answer").on("click",function(e){e.preventDefault();var r=s(this),t=r.parents(".yith_single_surveys_container"),a=t.find(".yith_surveys_answers"),n=a.attr("id"),i=a.val();if(""!=i){n=n.split("-"),n=n[1];var _={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0},y={yith_surveys_ids:n,yith_answers_ids:i,action:yith_survey_frontend_params.actions.save_surveys_voting};t.block(_),s.ajax({type:"POST",url:yith_survey_frontend_params.ajax_url,data:y,dataType:"json",success:function(e){if("true"==e.result){var a=s("#yith_surveys_answers-"+n),i=a.parents(".yith_single_surveys_container");i.after('<div class="yith_survey_thanks">'+yith_survey_frontend_params.messages.survey_thanks_voting+"</div>"),"yes"==yith_survey_frontend_params.hide_survey_after_answer&&i.addClass("survey_hide")}t.unblock(),r.hide()}})}}),s("body").on("init-survey-form",function(){}).trigger("init-survey-form")});